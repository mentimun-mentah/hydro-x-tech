{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/paulussimanjuntak/Desktop/react-hydrotech/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { Layout, notification, Row, Col, Switch } from \"antd\";\nimport { w3cwebsocket as W3CWebSocket } from \"websocket\";\nimport Chart from \"react-apexcharts\";\nimport ApexCharts from \"apexcharts\";\nimport isEqual from \"validator/lib/equals\";\nimport isEmpty from \"validator/lib/isEmpty\";\nimport Nav from \"react-bootstrap/Nav\";\nimport Card from \"react-bootstrap/Card\";\nimport Navbar from \"react-bootstrap/Navbar\";\nimport Container from \"react-bootstrap/Container\";\nimport LoginComponent from \"./components/Login\";\nimport { formLogin, formLoginIsValid } from \"./formdata/formLogin\";\nconst EMAIL = \"hydro@gmail.com\";\nconst PASSWORD = \"asdasd\";\nconst IP = \"192.168.18.229:81\";\n\nconst App = () => {\n  _s();\n\n  const [login, setLogin] = useState(formLogin);\n  const [isLogin, setIsLogin] = useState(false);\n  const [statistic, setStatistic] = useState([{\n    suhu: \"0\",\n    nutrisi: \"0\",\n    ph: \"0\"\n  }]);\n  const [series, setSeries] = useState([]);\n  const {\n    email,\n    password\n  } = login;\n\n  const inputChangeHandler = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n\n    if (isEmpty(value || \"\", {\n      ignore_whitespace: true\n    })) {\n      const data = { ...login,\n        [name]: { ...login[name],\n          value: value,\n          isValid: false,\n          message: \"Kolom tidak boleh kosong\"\n        }\n      };\n      setLogin(data);\n    } else {\n      const data = { ...login,\n        [name]: { ...login[name],\n          value: value,\n          isValid: true,\n          message: null\n        }\n      };\n      setLogin(data);\n    }\n  };\n\n  const submitLoginHandler = () => {\n    if (formLoginIsValid(login, setLogin)) {\n      if (isEqual(email.value, EMAIL) && isEqual(password.value, PASSWORD)) {\n        notification.success({\n          message: \"Success\",\n          description: \"Selamat datang Hydropronic\"\n        });\n        setIsLogin(true);\n        const dataWS = new W3CWebSocket(`ws://${IP}`, ['arduino']);\n\n        dataWS.onmessage = message => {\n          if (message.data !== \"Connected\") {\n            if (typeof message.data == \"string\") {\n              let dataObj = {};\n              const data = message.data.split(\",\");\n\n              for (let val of data) {\n                dataObj[val.split(\":\")[0]] = val.split(\":\")[1];\n              }\n\n              setStatistic(data => [...data, dataObj]);\n            }\n          }\n        };\n      } else {\n        setIsLogin(false);\n        notification.error({\n          message: \"Error\",\n          description: \"Akun tidak terdaftar\"\n        });\n      }\n    }\n  };\n\n  let ph = statistic.map(data => data.ph);\n  const suhu = statistic.map(data => data.suhu);\n  const nutrisi = statistic.map(data => data.nutrisi);\n  const seriesPH = [{\n    name: \"PH\",\n    data: ph\n  }];\n  console.log(seriesPH);\n  const optionPH = {\n    chart: {\n      id: 'realtime',\n      type: 'area',\n      zoom: {\n        enabled: false\n      },\n      toolbar: {\n        show: false\n      },\n      animations: {\n        enabled: true,\n        easing: 'linear',\n        dynamicAnimation: {\n          speed: 1000\n        }\n      }\n    },\n    yaxis: {\n      min: 0\n    },\n    xaxis: {\n      type: 'datetime',\n      range: 10,\n      labels: {\n        show: false\n      },\n      axisTicks: {\n        show: false\n      },\n      tooltip: {\n        enabled: false\n      }\n    },\n    plotOptions: {\n      bar: {\n        columnWidth: '45%'\n      }\n    },\n    sparkline: {\n      enabled: true\n    },\n    dataLabels: {\n      enabled: false\n    },\n    stroke: {\n      curve: 'smooth',\n      width: 3\n    },\n    title: {\n      text: parseFloat(ph[ph.length - 1]) + ' pH',\n      offsetX: 30,\n      style: {\n        fontSize: '24px',\n        cssClass: 'display-4'\n      }\n    },\n    subtitle: {\n      text: 'Power of Hydrogen',\n      offsetX: 30,\n      style: {\n        fontSize: '14px',\n        cssClass: 'apexcharts-yaxis-title'\n      }\n    },\n    colors: ['#54a0ff']\n  };\n  const phValue = parseFloat(ph[ph.length - 1]);\n  const isOnPHUp = phValue < 5;\n  const isOnPHDown = phValue > 7;\n  const isOnNutrisi = nutrisi[nutrisi.length - 1] < 500;\n  useEffect(() => {\n    if (isLogin) {\n      if (isOnPHUp) {\n        notification.success({\n          message: \"Pompa pH up\",\n          description: \"Pompa pH up dihidupkan\"\n        });\n      } else {\n        notification.success({\n          message: \"Pompa pH up\",\n          description: \"Pompa pH up dimatikan\"\n        });\n      }\n    }\n  }, [isOnPHUp, isLogin]);\n  useEffect(() => {\n    if (isLogin) {\n      if (isOnPHDown) {\n        notification.success({\n          message: \"Pompa pH down\",\n          description: \"Pompa pH down dihidupkan\"\n        });\n      } else {\n        notification.success({\n          message: \"Pompa pH down\",\n          description: \"Pompa pH down dimatikan\"\n        });\n      }\n    }\n  }, [isOnPHDown, isLogin]);\n  useEffect(() => {\n    if (isLogin) {\n      if (isOnNutrisi) {\n        notification.success({\n          message: \"Pompa nutrisi\",\n          description: \"Pompa nutrisi dihidupkan\"\n        });\n      } else {\n        notification.success({\n          message: \"Pompa nutrisi\",\n          description: \"Pompa nutrisi dimatikan\"\n        });\n      }\n    }\n  }, [isOnNutrisi, isLogin]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: isLogin ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {\n        expand: \"lg\",\n        variant: \"light\",\n        bg: \"light\",\n        children: /*#__PURE__*/_jsxDEV(Container, {\n          children: [/*#__PURE__*/_jsxDEV(Navbar.Brand, {\n            className: \"font-weight-bold\",\n            children: \"HYDRO X TECH\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Nav, {\n            className: \"ml-auto\",\n            children: /*#__PURE__*/_jsxDEV(Nav.Link, {\n              onClick: () => setIsLogin(false),\n              children: \"Logout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Layout, {\n        className: \"bg-white mt-5\",\n        children: /*#__PURE__*/_jsxDEV(Layout.Content, {\n          children: /*#__PURE__*/_jsxDEV(Container, {\n            children: /*#__PURE__*/_jsxDEV(Row, {\n              gutter: [16, 16],\n              children: [/*#__PURE__*/_jsxDEV(Col, {\n                lg: 16,\n                md: 24,\n                sm: 24,\n                xs: 24,\n                children: /*#__PURE__*/_jsxDEV(Card, {\n                  className: \"mb-2 h-100 shadow\",\n                  children: /*#__PURE__*/_jsxDEV(Chart, {\n                    options: optionPH,\n                    series: seriesPH,\n                    height: 428\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 225,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                lg: 8,\n                md: 24,\n                sm: 24,\n                xs: 24,\n                children: [/*#__PURE__*/_jsxDEV(Card, {\n                  className: \"mb-3 shadow\",\n                  children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                    className: \"p-2 h-100\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                      children: \"Suhu\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 232,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                      className: \"text-center display-4\",\n                      children: [suhu[suhu.length - 1], \"\\xB0C\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 233,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 231,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Card, {\n                  className: \"mb-3 shadow\",\n                  children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                    className: \"p-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                      children: \"Nutrisi\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 239,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                      className: \"text-center display-4\",\n                      children: [nutrisi[nutrisi.length - 1], \" ppm\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 240,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Card, {\n                  className: \"shadow\",\n                  children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                    className: \"p-2 text-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                      className: \"text-left\",\n                      children: \"Pompa\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 246,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"pH Up: \", /*#__PURE__*/_jsxDEV(Switch, {\n                        checkedChildren: \"On\",\n                        unCheckedChildren: \"Off\",\n                        checked: parseFloat(ph[ph.length - 1]) < 5\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 247,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 247,\n                      columnNumber: 15\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"pH Down: \", /*#__PURE__*/_jsxDEV(Switch, {\n                        checkedChildren: \"On\",\n                        unCheckedChildren: \"Off\",\n                        checked: parseFloat(ph[ph.length - 1]) > 7\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 248,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 248,\n                      columnNumber: 15\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Nutrisi: \", /*#__PURE__*/_jsxDEV(Switch, {\n                        checkedChildren: \"On\",\n                        unCheckedChildren: \"Off\",\n                        checked: nutrisi[nutrisi.length - 1] < 500\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 249,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 249,\n                      columnNumber: 15\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 245,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 244,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(LoginComponent, {\n      state: login,\n      onChange: inputChangeHandler,\n      submit: submitLoginHandler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n\n_s(App, \"hNKxsx5ayy4f+jwHMlNhAuPBHZ0=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/paulussimanjuntak/Desktop/react-hydrotech/src/App.js"],"names":["useEffect","useState","Layout","notification","Row","Col","Switch","w3cwebsocket","W3CWebSocket","Chart","ApexCharts","isEqual","isEmpty","Nav","Card","Navbar","Container","LoginComponent","formLogin","formLoginIsValid","EMAIL","PASSWORD","IP","App","login","setLogin","isLogin","setIsLogin","statistic","setStatistic","suhu","nutrisi","ph","series","setSeries","email","password","inputChangeHandler","e","name","target","value","ignore_whitespace","data","isValid","message","submitLoginHandler","success","description","dataWS","onmessage","dataObj","split","val","error","map","seriesPH","console","log","optionPH","chart","id","type","zoom","enabled","toolbar","show","animations","easing","dynamicAnimation","speed","yaxis","min","xaxis","range","labels","axisTicks","tooltip","plotOptions","bar","columnWidth","sparkline","dataLabels","stroke","curve","width","title","text","parseFloat","length","offsetX","style","fontSize","cssClass","subtitle","colors","phValue","isOnPHUp","isOnPHDown","isOnNutrisi"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Layout, notification, Row, Col, Switch } from \"antd\";\nimport { w3cwebsocket as W3CWebSocket } from \"websocket\";\n\nimport Chart from \"react-apexcharts\";\nimport ApexCharts from \"apexcharts\";\nimport isEqual from \"validator/lib/equals\";\nimport isEmpty from \"validator/lib/isEmpty\";\n\nimport Nav from \"react-bootstrap/Nav\";\nimport Card from \"react-bootstrap/Card\";\nimport Navbar from \"react-bootstrap/Navbar\";\nimport Container from \"react-bootstrap/Container\";\n\nimport LoginComponent from \"./components/Login\"\n\nimport { formLogin, formLoginIsValid } from \"./formdata/formLogin\";\n\nconst EMAIL = \"hydro@gmail.com\";\nconst PASSWORD = \"asdasd\";\nconst IP = \"192.168.18.229:81\";\n\nconst App = () => {\n  const [login, setLogin] = useState(formLogin);\n  const [isLogin, setIsLogin] = useState(false);\n  const [statistic, setStatistic] = useState([ { suhu: \"0\", nutrisi: \"0\", ph: \"0\" } ]);\n  const [series, setSeries] = useState([])\n\n  const { email, password } = login;\n\n  const inputChangeHandler = e => {\n    const name = e.target.name\n    const value = e.target.value\n\n    if(isEmpty(value || \"\", { ignore_whitespace: true })){\n      const data = {\n        ...login,\n        [name]: {\n          ...login[name],\n          value: value,\n          isValid: false,\n          message: \"Kolom tidak boleh kosong\",\n        },\n      };\n      setLogin(data);\n    } else {\n      const data = {\n        ...login,\n        [name]: {\n          ...login[name],\n          value: value,\n          isValid: true,\n          message: null,\n        },\n      };\n      setLogin(data);\n    }\n  }\n\n  const submitLoginHandler = () => {\n    if(formLoginIsValid(login, setLogin)){\n      if(isEqual(email.value, EMAIL) && isEqual(password.value, PASSWORD)){\n        notification.success({\n          message: \"Success\",\n          description: \"Selamat datang Hydropronic\",\n        });\n        setIsLogin(true);\n\n        const dataWS = new W3CWebSocket(`ws://${IP}`, ['arduino']);\n\n        dataWS.onmessage = message => {\n          if(message.data !== \"Connected\"){\n            if(typeof message.data == \"string\") {\n              let dataObj = {}\n              const data = message.data.split(\",\")\n              for(let val of data) {\n                dataObj[val.split(\":\")[0]] = val.split(\":\")[1]\n              }\n              setStatistic(data => [...data, dataObj])\n            }\n          }\n        }\n\n      } else {\n        setIsLogin(false);\n        notification.error({\n          message: \"Error\",\n          description: \"Akun tidak terdaftar\",\n        });\n      }\n    }\n  }\n\n  let ph = statistic.map(data => data.ph)\n  const suhu = statistic.map(data => data.suhu)\n  const nutrisi = statistic.map(data => data.nutrisi)\n  const seriesPH = [ { name: \"PH\", data: ph } ]\n  console.log(seriesPH)\n\n  const optionPH = {\n    chart: {\n      id: 'realtime',\n      type: 'area',\n      zoom: { enabled: false },\n      toolbar: { show: false },\n      animations: {\n        enabled: true,\n        easing: 'linear',\n        dynamicAnimation: {\n          speed: 1000\n        }\n      },\n    },\n    yaxis: {\n      min: 0\n    },\n    xaxis: {\n      type: 'datetime',\n      range: 10,\n      labels: { show: false },\n      axisTicks: { show: false },\n      tooltip: { enabled: false },\n    },\n    plotOptions: {\n      bar: { columnWidth: '45%', }\n    },\n    sparkline: { enabled: true },\n    dataLabels: { enabled: false },\n    stroke: { \n      curve: 'smooth', \n      width: 3,\n    },\n    title: {\n      text: parseFloat(ph[ph.length - 1]) + ' pH',\n      offsetX: 30,\n      style: {\n        fontSize: '24px',\n        cssClass: 'display-4'\n      }\n    },\n    subtitle: {\n      text: 'Power of Hydrogen',\n      offsetX: 30,\n      style: {\n        fontSize: '14px',\n        cssClass: 'apexcharts-yaxis-title'\n      }\n    },\n    colors: ['#54a0ff'],\n  }\n\n  const phValue = parseFloat(ph[ph.length - 1])\n  const isOnPHUp = phValue < 5\n  const isOnPHDown = phValue > 7\n  const isOnNutrisi = nutrisi[nutrisi.length - 1] < 500\n\n  useEffect(() => {\n    if(isLogin){\n      if(isOnPHUp){\n        notification.success({\n          message: \"Pompa pH up\",\n          description: \"Pompa pH up dihidupkan\",\n        });\n      } else {\n        notification.success({\n          message: \"Pompa pH up\",\n          description: \"Pompa pH up dimatikan\",\n        });\n      }\n    }\n\n  },[isOnPHUp, isLogin ])\n\n  useEffect(() => {\n    if(isLogin){\n      if(isOnPHDown){\n        notification.success({\n          message: \"Pompa pH down\",\n          description: \"Pompa pH down dihidupkan\",\n        });\n      } else {\n        notification.success({\n          message: \"Pompa pH down\",\n          description: \"Pompa pH down dimatikan\",\n        });\n      }\n    }\n  },[isOnPHDown, isLogin])\n\n  useEffect(() => {\n    if(isLogin){\n      if(isOnNutrisi){\n        notification.success({\n          message: \"Pompa nutrisi\",\n          description: \"Pompa nutrisi dihidupkan\",\n        });\n      } else {\n        notification.success({\n          message: \"Pompa nutrisi\",\n          description: \"Pompa nutrisi dimatikan\",\n        });\n      }\n    }\n  },[isOnNutrisi, isLogin])\n\n  return(\n    <>\n      {isLogin ? (\n        <>\n        <Navbar expand=\"lg\" variant=\"light\" bg=\"light\">\n          <Container>\n            <Navbar.Brand className=\"font-weight-bold\">HYDRO X TECH</Navbar.Brand>\n            <Nav className=\"ml-auto\">\n              <Nav.Link onClick={() => setIsLogin(false)}>Logout</Nav.Link>\n            </Nav>\n          </Container>\n        </Navbar>\n        <Layout className=\"bg-white mt-5\">\n          <Layout.Content>\n            <Container>\n              <Row gutter={[16, 16]}>\n\n                <Col lg={16} md={24} sm={24} xs={24}>\n                  <Card className=\"mb-2 h-100 shadow\">\n                    <Chart options={optionPH} series={seriesPH} height={428} />\n                  </Card>\n                </Col>\n\n                <Col lg={8} md={24} sm={24} xs={24}>\n                  <Card className=\"mb-3 shadow\">\n                    <Card.Body className=\"p-2 h-100\">\n                      <h5>Suhu</h5>\n                      <h2 className=\"text-center display-4\">{suhu[suhu.length - 1]}°C</h2>\n                    </Card.Body>\n                  </Card>\n\n                  <Card className=\"mb-3 shadow\">\n                    <Card.Body className=\"p-2\">\n                      <h5>Nutrisi</h5>\n                      <h2 className=\"text-center display-4\">{nutrisi[nutrisi.length - 1]} ppm</h2>\n                    </Card.Body>\n                  </Card>\n\n                  <Card className=\"shadow\">\n                    <Card.Body className=\"p-2 text-center\">\n                      <h5 className=\"text-left\">Pompa</h5>\n              <p>pH Up: <Switch checkedChildren=\"On\" unCheckedChildren=\"Off\"  checked={parseFloat(ph[ph.length - 1]) < 5} /></p> \n              <p>pH Down: <Switch checkedChildren=\"On\" unCheckedChildren=\"Off\"  checked={parseFloat(ph[ph.length - 1]) > 7} /></p> \n              <p>Nutrisi: <Switch checkedChildren=\"On\" unCheckedChildren=\"Off\"  checked={nutrisi[nutrisi.length - 1] < 500} /></p> \n                    </Card.Body>\n                  </Card>\n                </Col>\n\n              </Row>\n            </Container>\n          </Layout.Content>\n        </Layout>\n        </>\n      ) : (\n        <LoginComponent \n          state={login} \n          onChange={inputChangeHandler} \n          submit={submitLoginHandler} \n        />\n      )}\n    </>\n  )\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}